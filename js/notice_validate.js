var OPEN_VALIDATOR;OPEN_VALIDATOR={appweibo:function(B,E){var C=E.attr("data-error");B=B.replace(/\s/g,"");E.val(B);if(B&&!(/^[a-zA-Z][a-zA-Z0-9_\-]{0,19}$/g.test(B))){return C+"输入有误"}var D=E.attr("data-only");if(D){if(D==="true"){return true}else{var A=+E.attr("error-flag");if(A===1){return"该"+C+"尚未通过认证"}else{if(A===0){return"该"+C+"不存在"}else{if(A===undefined){return 1}}}}}else{return 1}return true},appweiboCheck:function(A,E){var B=E.attr("data-error"),C=E.attr("data-default"),G=E.attr("data-rule"),D="/pipes/interfaceserver",F={"action":"common_query","business_type":"ajax_checkvip","account":A};if(C!=A){showmsg(1,E,"正在验证"+B);$.ajax({"type":"get","dataType":"json","url":D,"data":F,"success":function(J){console.log(J);var H=E.attr("data-working")|0,K=+J.ret,I=common.getMsgByRet(K);if(I){E.attr("data-only",false);showmsg(false,E,I);E.removeAttr("data-working");return}if(K===0){E.attr("data-only",true);showmsg(true,E,"");if(H==2){setTimeout(function(){$("form input[type='submit']").trigger("click")},500)}else{getPreview(J.data.head,J.data.nick,J.data.notice_type)}E.removeAttr("data-working")}else{if(K===1){E.attr("data-only",false);E.attr("error-flag",1);showmsg(false,E,"该"+B+"尚未通过认证");E.removeAttr("data-working");if(H==2){loginWin.alert("<center>该"+B+"尚未通过认证</center>")}getPreview("http://app.qlogo.cn/mbloghead/f961aa13250bb219f968","你画我猜",0);return false}else{E.attr("data-only",false);E.attr("error-flag",0);showmsg(false,E,"该"+B+"不存在");E.removeAttr("data-working");if(H==2){loginWin.alert("<center>该"+B+"不存在</center>")}getPreview("http://app.qlogo.cn/mbloghead/f961aa13250bb219f968","你画我猜",0);return false}}},"error":function(){E.attr("data-only","false");setTimeout(function(){showmsg(false,E,"验证失败！请检查网络")},100);getPreview("http://app.qlogo.cn/mbloghead/f961aa13250bb219f968","你画我猜",0);return false}});return true}else{E.attr("data-only","true");E.removeAttr("data-working");return true}}};function showmsg(C,B,A){var D;if(!C){D=' <span class="tip tip_err"><span class="tip_icon"></span>'+A+"</span>"}else{if(true===C){D=' <span class="tip tip_ok"><span class="tip_icon"></span></span>'}else{if(1===C){D=' <span class="tip tip_waiting"><span class="tip_icon"></span>'+A+"</span>"}else{if(2===C){D=' <span class="tip">'+A+"</span>"}}}}if(B.parent(".form_input").size()){B.parent(".form_input").parent().find(".tip").remove();B.parent(".form_input").after(D);B.parent(".form_input").parent().find(".inputdes").first().hide()}else{B.parent().find(".tip").remove();B.parent().append(D)}if(!C){removePreview()}}$(function(){$("input[type='text']").blur(function(){var F,A,E,C,D;F=$(this);F.val($.trim(F.val()));A=F.val();E=F.attr("data-rule");C=F.attr("data-error");if(OPEN_VALIDATOR.hasOwnProperty(E)&&E){if(!$.trim(A)){C+="不能为空";D=false}else{var B=OPEN_VALIDATOR[E](A,F);if(B==undefined){D=false;C=""}else{if(B===true){D=true}else{if(B===1){return}else{D=false;C=B}}}}showmsg(D,F,C)}if(!D){getPreview("http://app.qlogo.cn/mbloghead/f961aa13250bb219f968","你画我猜",0)}});$("form input[data-rule='appweibo']").change(function(){var B=$(this),C=B.attr("data-rule"),A=B.val().replace(/\s/g,"");if(C=="appweibo"){if(/^[a-zA-Z][a-zA-Z0-9_\-]{0,19}$/g.test(A)){B.removeAttr("data-only");B.removeAttr("error-flag");B.attr("data-working",1);OPEN_VALIDATOR["appweiboCheck"](A,B)}}});$("#noticeSubmit").click(function(){var B,C,A,E,H=true,D="",F=this.form,G=$(F).find("input[data-working]");if(G.size()>0){G.attr("data-working",2);return false}$(".appform input[type='text']").each(function(){A=$(this).attr("data-rule");E=$(this).val();C=$(this).attr("data-error");if(OPEN_VALIDATOR.hasOwnProperty(A)&&A){if(!$.trim(E)){C+="不能为空";B=false}else{var I=OPEN_VALIDATOR[A](E,$(this));if(I===true){B=true}else{if(I===1){return}else{B=false;C=I}}}H=H&&B;showmsg(B,$(this),C);if(B===false){loginWin.alert("<center>"+C+"</center>")}}});if(H){formSubmit()}return false});$("form").keydown(function(A){if(A.keyCode==13){}});$("form input[type='reset']").click(function(){$(".form_input").next(".errorTip").remove();$(".form_input").next(".currectTip").remove();location.href="/development/notice?appid="+global_obj.data.app.app_id})});