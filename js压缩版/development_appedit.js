(function(){var I=[".hostingclick {","cursor: pointer;","line-height: 25px;","padding-left: 0.8em;","padding-right: 0.8em;","border-top: 1px solid #d9d9d9;","border-left: 1px solid #d9d9d9;","border-right: 1px solid #d9d9d9;","font-weight: bold;","}",".hosting {","cursor: pointer;","line-height: 25px;","padding-left: 0.8em;","padding-right: 0.8em;","border-bottom: 1px solid #d9d9d9;","}","div a#yunJPGClick {","display: none","}",".icon_alert {","width: 38px;","height: 38px;","background: url(http://mat1.gtimg.com/app/opent/images/public/icon.png)","-352px -59px no-repeat;","display: inline-block;","zoom: 1;","}"].join("");util.createStyle(I);tpl.development_app_material=["<li>",'<label class="form_label">',"<%if (app.app_type ==5 ) {%>组件图标：<%} else if (app.app_type ==6) {%><em>*</em>应用图标：<%} else {%>应用图标：<%}%>","</label>",'<div class="form_element">','<table width="550">',"<tbody>","<tr>",'<td valign="bottom" align="left" height="75">','<label class="nullimg">','<img src="<%=app.app_icon_16 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="16" height="16" _width="16" _height="16"/>',"</label>","<br>","<label>","16×16","</label>","<br>",'<label for="icon1" class="uploadbtn">',"上传","</label>",'<input type="file" _size="20" accept="image/png" name="icon1" id="icon1" data-default="<%=app.app_icon_16%>" <%if (app.app_type ==6 ) {%>class="required" _size="15"<%} else {%>class="file"<%}%>  data-label="<%if (app.app_type == 5) {%>组件图标<%} else {%>应用图标<%}%>"/>','<input type="hidden" name="img_need_post" id="img_need_post" value="0">',"</td>",'<td valign="bottom" align="left">','<label class="nullimg">','<img src="<%=app.app_icon_50 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="50" height="50" _width="50" _height="50"/>',"</label>","<br>","<label>","50×50","</label>","<br>",'<label for="icon2" class="uploadbtn">',"上传","</label>",'<input type="file" _size="20" accept="image/png" name="icon2" id="icon2" data-default="<%=app.app_icon_50%>" <%if (app.app_type ==6 ) {%>class="required" _size="15"<%} else {%>class="file"<%}%> data-label="<%if (app.app_type == 5) {%>组件图标<%} else {%>应用图标<%}%>"/>',"</td>",'<td valign="bottom" align="left">','<label class="nullimg">','<img src="<%=app.app_icon_64 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="64" height="64" _width="64" _height="64" />',"</label>","<br>","<label>","64×64","</label>","<br>",'<label for="icon3" class="uploadbtn">',"上传","</label>",'<input type="file" _size="20" accept="image/png" name="icon3" id="icon3" data-default="<%=app.app_icon_64%>" <%if (app.app_type ==6 ) {%>class="required" _size="15"<%} else {%>class="file"<%}%> data-label="<%if (app.app_type == 5) {%>组件图标<%} else {%>应用图标<%}%>"/>',"</td>",'<td valign="bottom" align="left">','<label class="nullimg">','<img src="<%=app.app_icon_75 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="75" height="75" _width="75" _height="75"/>',"</label>","<br>","<label>","75×75","</label>","<br>",'<label for="icon4" class="uploadbtn">',"上传","</label>",'<input type="file" _size="20" accept="image/png" name="icon4" id="icon4" data-default="<%=app.app_icon_75%>" <%if (app.app_type ==6 ) {%>class="required" _size="15"<%} else {%>class="file"<%}%> data-label="<%if (app.app_type == 5) {%>组件图标<%} else {%>应用图标<%}%>"/>',"</td>","<%if (app.app_type ==6 ) {%>",'<td valign="bottom" align="left">','<label class="nullimg">','<img src="<%=app.app_icon_114 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="114" height="114" _width="114" _height="114"/>',"</label>","<br>","<label>","114×114","</label>","<br>",'<label for="icon5" class="uploadbtn">',"上传","</label>",'<input type="file" _size="20" accept="image/png" name="icon5" id="icon5" data-default="<%=app.app_icon_114%>" <%if (app.app_type ==6 ) {%>class="required" _size="15"<%} else {%>class="file"<%}%> data-label="<%if (app.app_type == 5) {%>组件图标<%} else {%>应用图标<%}%>"/>',"</td>","<%}%>","</tr>","<tr>",'<td colspan="<%if (app.app_type == 6) {%>5<%} else {%>4<%}%>" >','<label class="gray">',"*图片格式为png &nbsp; &nbsp; *每张图片最大不超过20K","</label>",'<div id="anquanlink" style="display:none;">','<a href="http://open.t.qq.com/bbs/forum.php?mod=viewthread&amp;tid=21271" target="_blank">',"如何将本站添加到受信任的站点列表中？","</a>","</div>","</td>","</tr>","</tbody>","</table>","</div>","</li>","<% if (app.app_type !=5 && app.app_type !=6) { %>","<li>",'<label class="form_label">',"应用预览图：","</label>",'<div class="form_element">','<table width="450">',"<tbody>","<tr>","<td>",'<label class="nullimg">','<img src="<%=app.app_icon_p1 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="200" height="150" _width="330" _height="247">',"</label>","<br>","<label>","330×247","</label>",'<label class="uploadbtn" for="pic1">',"上传","</label>",'<input type="file" _size="50" accept="image/png" name="pic1" id="pic1" data-default="<%=app.app_icon_p1%>" class="file" data-label="应用预览图"/>',"</td>","<td>",'<label class="nullimg">','<img src="<%=app.app_icon_p2 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="200" height="150" _width="330" _height="247">',"</label>","<br>","<label>","330×247","</label>",'<label class="uploadbtn" for="pic2">',"上传","</label>",'<input type="file" _size="50" accept="image/png" name="pic2" id="pic2" data-default="<%=app.app_icon_p2%>" class="file" data-label="应用预览图"/>',"</td>","</tr>",'<tr ><td height="10"  colspan="2"></td></tr>','<tr><td colspan="2"><label class="gray">*图片格式为png &nbsp; &nbsp; *每张图片最大不超过50K</label> </td></tr>',"</tbody>","</table>",'<div class="graydes">预览图在应用详情页展示，建议您提交的截图体现腾讯微博与应用结合场景</div>','<div class="materialIntro previewIntro">','<a class="example" id="previewExample" href="javascript:;">填写示例</a>','<div class="materialDetail previewDetail" id="previewDiv">','<div class="meterialTitle">在应用详情页，会显示两张应用预览图，如蓝框所示</div>','<img id="previewImg" width="431px" height="270px" src="http://mat1.gtimg.com/app/opent/images/development/apppreview.jpg"/>',"</div>","</div>","</div>","</li>","<%if (app.app_type ==4) {%>","<li>",'<label class="form_label">',"应用背景图：","</label>",'<div class="form_element">','<table width="450">',"<tbody>","<tr>",'<td  colspan="2">','<label class="nullimg">','<img src="<%=app.app_icon_p3 || \'http://mat1.gtimg.com/app/opent/images/websites/0.gif\'%>" width="350"','height="247" _width="760" _height="580">',"</label>","<br>","<label>","760×580","</label>",'<label class="uploadbtn" for="pic3">',"上传","</label>",'<input type="file" _size="100" accept="image/png" name="pic3" id="pic3" data-default="<%=app.app_icon_p3%>" class="file" data-label="应用背景图"/>',"</td>","</tr>",'<tr><td><label class="gray">*图片格式为png &nbsp; &nbsp; *每张图片最大不超过100K</label> </td></tr>',"</tbody>","</table>",'<div class="graydes">背景图在进入应用页面展示</div>','<div class="materialIntro previewIntro">','<a class="example" id="backgroundExample" href="javascript:;">填写示例</a>','<div class="materialDetail backgroundDetail" id="backgroundDiv">','<div class="meterialTitle">进入应用时，会显示应用背景图，即蓝框所示</div>','<img id="backgroundImg" width="409px" height="335px" src="http://mat1.gtimg.com/app/opent/images/development/appbackground.jpg"/>',"</div>","</div>","</div>","</li>","<%}%>","<%}%>"].join("");tpl.appedit=['<!--{ include file="header.tpl" }-->',tpl.header,'<div id="content" class="controlCon main main_app">','<div class="approate"><a href="/development/">我的应用</a> &gt; <span><%=app.app_name%></span>',"</div>",'<div class="deverLeft">','<div class="leftMain">','<div class="uicon"><img src="<%=app.app_icon_75 || \'http://mat1.gtimg.com/app/opent/images/index/icon.jpg\'%>" height="75" width="75" /><br />',"<p><%=app.app_name%></p>","</div>",tpl.appnav,"</div>","</div>",'<div class="deverRight">','<h1 class="comp_tit">应用基本信息</h1>','<iframe id="appform_post_aec" name="appform_post_aec" width="100" height="100" src="about:blank" style="display: none;"></iframe>','<form action="/development/saveappinfopage?appid=<%=app.app_id%>" method="post" class="appform <%if (app.app_type==6) {%>wirelessappform<%}%>" enctype="multipart/form-data" id="appform" target="appform_post_aec" onsubmit="return false">',"<ul>","<%if (app.app_status==2) {%>",'<li class="alert alert_warn" beclose="true">',"<h4>应用审核中，应用资料不可修改</h4>","</li>","<%} else if (app.app_status==6) {%>",'<li class="alert alert_warn" beclose="true">',"<h4>上架审核中，应用资料不可修改</h4>","</li>","<%} else if (app.app_url_check ==true ) {%>",'<li class="alert alert_warn" beclose="true">',"<h4>应用网址已提交，审核通过后才能生效</h4>","</li>","<%} else if (app.app_check_status ==1 ) {%>",'<li class="alert alert_warn" beclose="true">',"<h4>资料已提交，审核通过后才能生效</h4>","</li>","<%} else if (app.app_check_status ==2 && (app.app_status ==5 || app.app_status ==8 || app.app_status ==3)) {%>",'<li class="alert alert_warn" beclose="true"><a href="javascript:;" class="hidebtn closealert">关闭</a>',"<h4>资料已通过审核</h4>","</li>","<%} else if (app.app_check_status ==3 && (app.app_status ==5 || app.app_status ==8 || app.app_status ==3)) {%>",'<li class="alert alert_warn" beclose="true"><a href="javascript:;" class="hidebtn closealert">关闭</a>',"<h4>你修改的资料未通过审核，可以修改后重新提交<br />",'如果有疑问请<a href="http://wiki.open.t.qq.com/index.php/%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC" target="_blank">请联系我们</a></h4>',"</li>","<%}%>",tpl.development_app_info,tpl.development_app_material,'<li style="height:39px;"><label class="form_label">&nbsp;</label> <span class="form_element">','<input type="submit" class="devSubmit" id="devSubmit" value="<%if (app.app_type==3 || app.app_type==6) {%>保存设置<%} else {%>保存<%}%>" data-rule="formauto">','<input type="reset" class="devCancel" value="取消" onclick="history.go(-1)"> </span>',"</li>","</ul>","</form>","</div>","</div>",tpl.footer,].join("");global_obj.data.app=global_obj.data.app||{};global_obj.data.iphoneinfo=global_obj.data.iphoneinfo||{};var L=global_obj.data.iphoneinfo;global_obj.data.androidinfo=global_obj.data.androidinfo||{};var E=global_obj.data.androidinfo;var M=global_obj.data.app;$("#main").html(tmpl(tpl.appedit,global_obj.data));window.bindAllEvent();if(M.app_type!=5){var I=["label.form_label{width:100px;}",".appform span.form_input{margin-left:100px;}",".appform .form_element {margin-left:100px;}","#showtgdiv{display:none;line-height:1.75;}","#showtgdiv.show{display:inline-block;*display:inline;zoom:1;}"].join("");util.createStyle(I)}if(M.app_type==4){$(function(){$("input[name='app_hosting']").click(function(){var O=$(this).filter(":checked").val();$("#app_realpath_desc").html(["应用开发完毕后，请将应用地址填写在此处 <br/>应用测试页面的iframe会调用此地址帮助您完成应用测试 <br/>应用提交审核后，审核人员也会通过该地址审核你的应用 <br/>用户使用此应用时，微博服务器会向该地址发送请求获取应用内容","应用开发完毕后请先将应用部署在自己的服务器上，并将应用地址填写在此处<br/>应用测试页面的iframe会调用此地址帮助您完成应用测试<br>应用提交审核后，审核人员也会通过该地址审核你的应用<br> 应用上架后此地址失效"][+O]).width([350,420][+O])});$("#tuguan").mouseover(function(){$("#showtgdiv").addClass("show");$(this).parent().addClass("reflow")})})}var J={};$("#appweiboLink").mouseover(function(){if(J.timer){clearTimeout(J.timer)}$(".appweiboDetail").show()}).mouseout(function(){J.timer=setTimeout(function(){$(".appweiboDetail").hide()},200)});$(".appweiboDetail").mouseover(function(){if(J.timer){clearTimeout(J.timer)}}).mouseout(function(){J.timer=setTimeout(function(){$(".appweiboDetail").hide()},200)});if(M.app_type==6){$(function(){function O(){var P=0;if($("#iphone_pf").attr("checked")&&$("#android_pf").attr("checked")){P=3}else{if($("#iphone_pf").attr("checked")){P=1}else{if($("#android_pf").attr("checked")){P=2}}}$("input[name='app_platform']").val(P);return P}$("input[name='appplatform']").change(function(){var P=$("input[name='appplatform']");O();if($("input[name='appplatform']:checked").length==0){showmsg(false,$("#iphone_pf"),"请至少选择一个平台");loginWin.alert("<center>请至少选择一个平台</center>")}else{showmsg(true,$("#iphone_pf"),"")}})})}if(M.app_type!=5&&M.app_type!=3&&M.app_type!=6&&M.app_type!=4){$(function(){var O=M.app_status;$("a#change_type").click(function(){if(O==1||O==7||O==5||O==4||O==8){loginWin.show({"width":685,"height":360,"title":"提示","text":'<div class="tipTop" style="height: auto;">							<div style="width: 645px; margin: 0 auto;">							<h3 style="padding-left: 26px; font-size: 14px; font-weight: normal; background: url(http://mat1.gtimg.com/app/opent/images/development/icon_notice.gif) no-repeat 0 0;">改为"站内应用"后将无法改回到原来的应用类型，如果确定改为站内应用，请选择部署模式：</h3>							<div id="app_hosting1" style="padding: 15px 30px 30px;">								<p><input type="radio"  name="app_hosting1" value="1" id="app_hosting"/>									<label for="app_hosting">使用腾讯云平台托管/部署服务(Hosting)</label>  </p>								<p><input type="radio" name="app_hosting1" value="0" checked="true" id="app_nohosting"/>									<label for="app_nohosting">不使用腾讯云平台托管/部署服务(Non-Hosting)</p>							</div>							<p style="padding-left: 15px;">应用托管详细介绍：</p>							<p style="color: #777; padding-left: 15px;">微博开放平台针对服务器，带宽，云存储等云服务资源进行计费(<a href="http://wiki.open.qq.com/wiki/%E8%85%BE%E8%AE%AF%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E4%BA%91%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%9C%8D%E5%8A%A1%E8%B4%B9%E8%AE%A1%E8%B4%B9%E6%A0%87%E5%87%86" target="_blank">计费标准见这里</a>)；</p>							<p style="color: #777; padding-left: 15px;">如果你的应用需要接支付功能，请选择“Hosting”，Non-hosting不可接支付功能；</p>							<p style="color: #777; padding-left: 15px;">应用创建成功后，Non-hosting可改为Hosting，但Hosting不可改为Non-hosting。</p>							</div>						</div>						<div class="tipBottom" style="text-align: center;"><input type="button" class="devSubmit" value="确定" /></div>'});var P=loginWin.contentarea.find(".devSubmit");P.bind("click",function(){loginWin.close();loginWin.show({text:"<center><br/>正在转为站内应用，请不要关闭浏览器！</center>",height:120,width:450});var Q={"action":"common_query","business_type":"saveappinfo","app_type":4,"actiontype":1,"appid":M.app_id,"app_hosting":$("#app_hosting1 input:checked").val()};$.ajax({type:"POST",url:"/pipes/interfaceserver",dataType:"json",data:Q,success:function(R){loginWin.close();if(R.error==0){if(O==1||O==7){loginWin.alert('<center>应用类型修改成功，请按<a href="http://wiki.open.t.qq.com/index.php/%E5%BA%94%E7%94%A8%E9%A2%91%E9%81%93%E6%8E%A5%E5%85%A5%E6%8C%87%E5%BC%95#.E5.B7.B2.E5.BC.80.E5.8F.91.E7.9A.84.E7.AB.99.E5.A4.96.E5.BA.94.E7.94.A8.E6.8E.A5.E5.85.A5" target="_blank">站内应用改造规范</a>进行改造</center>',function(){window.submitCallback&&submitCallback(R);location.reload()})}else{loginWin.alert("<center>已提交，通过审核后才能生效</center>",function(){window.submitCallback&&submitCallback(R);location.reload()})}}else{if(R.error==1){loginWin.alert("<center>提交内容包含非法数据，请重新提交</center>")}else{loginWin.alert("<center>数据提交失败，请稍候再试</center>")}}},error:function(){loginWin.close();loginWin.alert("<center>网络连接失败，请稍候再试</center>")}})})}else{if(O==3){loginWin.close();loginWin.alert('<center>已上架应用不能直接修改应用类型，如有修改需要<a  href="http://wiki.open.t.qq.com/index.php/%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC" target="_blank">请联系我们</a></center>')}else{if(O==2){loginWin.close();loginWin.alert("<center>应用审核中，不能修改应用类型，审核完毕后即可修改</center>")}else{loginWin.close();loginWin.alert("<center>上架审核中，不能修改应用类型，审核完毕后即可修改</center>")}}}})})}if(M.app_type==6){$(function(){$("input[type=file]").change(function(){$("input#img_need_post").val("1")})})}if(M.app_type!=5&&M.app_type!=6){$(function(){$("input[type=file]").change(function(){$("input#img_need_post").val("1")})})}if(M.app_type==4){$(function(){$("input[type=file]").change(function(){$("input#img_need_post").val("1")})})}var K=+M.app_type;$(function(){var O={};$("#backgroundExample").mouseover(function(){if(O.timer){clearTimeout(O.timer)}$("#backgroundDiv").show()}).mouseout(function(){O.timer=setTimeout(function(){$("#backgroundDiv").hide()},200)});$("#backgroundDiv").mouseover(function(){if(O.timer){clearTimeout(O.timer)}}).mouseout(function(){O.timer=setTimeout(function(){$("#backgroundDiv").hide()},200)});var P={};$("#previewExample").mouseover(function(){if(P.timer){clearTimeout(P.timer)}$("#previewDiv").show()}).mouseout(function(){P.timer=setTimeout(function(){$("#previewDiv").hide()},200)});$("#previewDiv").mouseover(function(){if(P.timer){clearTimeout(P.timer)}}).mouseout(function(){P.timer=setTimeout(function(){$("#previewDiv").hide()},200)})});util.createScript("http://mat1.gtimg.com/app/opent/rebuild/js/app_appedit.js");if((M.app_check_status==1&&M.app_url_check=="")||M.app_status==2||M.app_status==6||(M.app_status==5&&(L.app_plat_status==1||E.app_plat_status==1))||((L.app_check_status==1||E.app_check_status==1)&&(L.app_plat_status==2||E.app_plat_status==2))){$(function(){$("input,textarea").attr("disabled","disabled");$("input,select").attr("disabled","disabled");$("input#devSubmit").attr("class","devCancel");$("label.uploadbtn").hide();$('input[type="file"]').hide()})}if(M.app_url_check==true){$(function(){$("input#app_url").attr("disabled","disabled")})}if(M.app_status==5||M.app_status==4||M.app_status==8){$(function(){$('input[type="file"]').addClass("required")})}var H=M.app_url_check||"0",G=M.app_name,F=M.app_status,A=M.app_check_status,B=M.app_id,N=E.app_plat_status,D=L.app_plat_status;if(M.app_type==4){var C=true}else{var C=false}$(function(){$(".appform li.alert").find(".hidebtn").click(function(){var O=$(this),Q=O.parent(),P=Q.find(".alert_content");if(Q.attr("beclose")){Q.hide();$.get("/development/clearappsitemsg?appid="+M.app_id+"&st="+new Date().getTime());return}});$("input#app_name").change(function(){if(G!=$("input#app_name").val()){$("input#postname").val("1")}else{$("input#postname").val("0")}})})})();